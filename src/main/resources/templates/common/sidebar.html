<sidebar th:fragment="sidebar">
    <div class="sidebar">
        <ul>
            <li id="scrollTopBtn">
                <i class="bi bi-caret-up"></i>
                <span>ë§¨ìœ„ë¡œ</span>
            </li>
            <span class="sidebarline">ã…¡</span>
            <a href="javascript:void(0);" onclick="checkLoginAndRedirect('/reservation')">
                <li>
                    <i class="bi bi-calendar3"></i>
                    <span>ì˜ˆì•½</span>
                </li>
            </a>
            <span class="sidebarline">ã…¡</span>
            <a href="/faq">
                <li>
                    <span class="faq">FAQ</span>
                </li>
            </a>
            <span class="sidebarline">ã…¡</span>
            <a href="javascript:void(0);" onclick="checkLoginAndRedirect('/greservation')">
                <li>
                    <i class="bi bi-person-circle"></i>
                    <span>ë§ˆì´í˜ì´ì§€</span>
                </li>
            </a>

        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function checkLoginAndRedirect(url) {
            fetch('/api/checkLoginStatus', {
                method: 'GET',
                credentials: "include" // â­ ì„¸ì…˜ ì¿ í‚¤ í¬í•¨ â­
            })
                .then(response => response.json())
                .then(data => {
                    console.log("ë¡œê·¸ì¸ ìƒíƒœ:", data);
                    if (data.loggedIn) {
                        window.location.href = url; // ğŸ”¥ ë§ˆì´í˜ì´ì§€ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ URLì— ì‚¬ìš© ê°€ëŠ¥!
                    } else {
                        Swal.fire({
                            title: "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
                            text: "ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¨¼ì € ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonText: "ë¡œê·¸ì¸",
                            cancelButtonText: "ë‹«ê¸°",
                            customClass: {
                                confirmButton: "custom-btn",  // ğŸ”¥ í™•ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì§€ì •
                                cancelButton: "custom-cancel" // ê¸°ë³¸ ì·¨ì†Œ ë²„íŠ¼ ìŠ¤íƒ€ì¼
                            },
                            buttonsStyling: false // SweetAlert ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì œê±°
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = "/login"; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                            }
                        });
                    }
                })
                .catch(error => console.error("ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error)); // ì˜¤ë¥˜ ë¡œê¹…
        }


    </script>

    <style>
        .custom-btn {
            background-color: #8A1812 !important;
            color: white !important;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            margin-right: 20px;
        }

        .custom-btn:hover {
            background-color: #a6332d !important;
        }

        .custom-cancel {
            background-color: #ddd !important;
            color: #555 !important;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
        }

    </style>


</sidebar>