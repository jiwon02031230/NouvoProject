

<header th:fragment="header">
    <div class="navtop">
        <!-- ë¡œê³  -->
        <div class="logo">
            <a href="/main"><img src="/images/common/logo01.png"></a>
        </div>
        <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
        <div class="loginJoin">


            <div class="loginaccess">
                <!-- ë¹„ë¡œê·¸ì¸ ìƒíƒœ -->
                <div th:unless="${session.loginMember}">
                    <a href="/login" class="login">ë¡œê·¸ì¸</a> / <a href="/sign_up" class="join">íšŒì›ê°€ì…</a>
                </div>

                <!-- ë¡œê·¸ì¸ ìƒíƒœ -->
                <div th:if="${session.loginMember}" class="loginSuccess">
                    <p id="welcomeMessage" th:text="${session.loginMember.memName} + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.'"></p>
                    <a href="/inquiry"><i class="bi bi-person"></i></a>
                    <a href="/cart"><i class="bi bi-cart4"></i></a>
                    <a href="/logout" class="logout">ë¡œê·¸ì•„ì›ƒ</a> <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì¶”ê°€ -->
                </div>

            </div>

        </div>
    </div>


    <!-- header -->
    <div id="header">

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <ul id="nav">
            <li class="nav1">
                <a href="/aboutus">ëˆ„ì˜¤ë³´</a>
                <ul class="inner_menu">
                </ul>
            </li>

            <li class="nav1">
                <a href="/menu">ë©”ë‰´</a>
            </li>

            <li class="nav1">
                <a href="javascript:void(0);" onclick="checkLoginAndRedirect('/reservation')">ì˜ˆì•½</a>
            </li>

            <li class="nav1">
                <a href="/community">ê³ ê°ì§€ì›</a>
            </li>


            <li class="nav1">
<!--                <a th:if="${loginMember != null}" th:href="@{/inquiry}">ë§ˆì´í˜ì´ì§€</a>-->
<!--                <a th:unless="${loginMember != null}" href="javascript:alertAndRedirect();">ë§ˆì´í˜ì´ì§€</a>-->
                <a href="javascript:void(0);" onclick="checkLoginAndRedirect('/inquiry')">ë§ˆì´í˜ì´ì§€</a>
            </li>

        </ul>
    </div>
    <!-- header ë -->

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function checkLoginAndRedirect(url) {
            fetch('/api/checkLoginStatus', {
                method: 'GET',
                credentials: "include" // â­ ì„¸ì…˜ ì¿ í‚¤ í¬í•¨ â­
            })
                .then(response => response.json())
                .then(data => {
                    console.log("ë¡œê·¸ì¸ ìƒíƒœ:", data);
                    if (data.loggedIn) {
                        window.location.href = url; // ğŸ”¥ ë§ˆì´í˜ì´ì§€ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ URLì— ì‚¬ìš© ê°€ëŠ¥!
                    } else {
                        Swal.fire({
                            title: "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤",
                            text: "ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¨¼ì € ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonText: "ë¡œê·¸ì¸",
                            cancelButtonText: "ë‹«ê¸°",
                            customClass: {
                                confirmButton: "custom-btn",  // ğŸ”¥ í™•ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì§€ì •
                                cancelButton: "custom-cancel" // ê¸°ë³¸ ì·¨ì†Œ ë²„íŠ¼ ìŠ¤íƒ€ì¼
                            },
                            buttonsStyling: false // SweetAlert ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì œê±°
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = "/login"; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                            }
                        });
                    }
                })
                .catch(error => console.error("ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error)); // ì˜¤ë¥˜ ë¡œê¹…
        }


    </script>

    <style>
        .custom-btn {
            background-color: #8A1812 !important;
            color: white !important;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            margin-right: 20px;
        }

        .custom-btn:hover {
            background-color: #a6332d !important;
        }

        .custom-cancel {
            background-color: #ddd !important;
            color: #555 !important;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
        }

    </style>


</header>